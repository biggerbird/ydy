webpackJsonp([30],{0:function(t,e,a){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}var o=a(11),s=c(o),i=a(765),n=c(i);new s.default({el:"body",components:{App:n.default}})},6:function(t,e,a){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}var o=a(2),s=c(o);a(4);s.default.Vue.use(s.default.Resource),t.exports={data:function(){return{title:""}},props:["html"],ready:function(){this.title=document.title},methods:{back:function(){this.html?window.location.href=this.html:history.back()}}}},7:function(t,e){},8:function(t,e){t.exports=' <div class=height _v-526c7022=""></div> <div class="backbar clearfix" id=header _v-526c7022=""> <a @click=back class=back _v-526c7022=""><i class="iconfont icon-back" _v-526c7022=""></i></a> <h2 class="title ellipsis" id=title _v-526c7022="">{{title}}</h2> <a href=home.html class=home _v-526c7022=""><i class="iconfont icon-back" _v-526c7022=""></i></a> </div> '},9:function(t,e,a){var c,o,s={};a(7),c=a(6),o=a(8),t.exports=c||{},t.exports.__esModule&&(t.exports=t.exports.default);var i="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;o&&(i.template=o),i.computed||(i.computed={}),Object.keys(s).forEach(function(t){var e=s[t];i.computed[t]=function(){return e}})},295:function(t,e,a){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(2),s=c(o),i=a(44),n=c(i),d=a(4),p=a(9),r=c(p);s.default.Vue.component(d.Popup.name,d.Popup),s.default.Vue.component(d.Button.name,d.Button),s.default.Vue.component(d.Field.name,d.Field),e.default={data:function(){return{id:"",product:"",addr:"",popupVisible:!1,paypwd:"",yundou:"",addressId:"",totalmoney:"",order:"",location:""}},components:{topBack:r.default},ready:function(){this.id=s.default.C.getSearchString("id"),this.getData()},methods:{getData:function(){d.Indicator.open();var t=s.default.C.Mpath+"order/info?orderId="+this.id;this.$http.jsonp(t).then(function(t){d.Indicator.close(),this.product=t.data.product,this.addr=t.data.adress,this.yundou=t.data.user.avayundou,this.order=t.data.order,this.totalmoney=t.data.order.totalmoney},function(){d.Indicator.close(),(0,d.Toast)("请求出错")})},payment:function(){return this.totalmoney>this.yundou?((0,d.Toast)("云豆数量不够"),!1):!!this.testPaypass(this.paypwd)&&void this.$http.jsonp(s.default.C.Mpath+"order/ajaxComparePaypwd?payPwd="+this.paypwd+"&yundou="+this.totalmoney+"&orderId="+this.id).then(function(t){1==t.data.status?((0,d.Toast)("支付成功"),this.popupVisible=!1,setTimeout(function(){location.href="user.html"},1e3)):t.data.status==-1?((0,d.Toast)(t.data.message),setTimeout(function(){window.location.href="password.html"},1e3)):(0,d.Toast)(t.data.message)},function(){(0,d.Toast)("请求出错")})},showdeduc:function(){this.popupVisible=!0},alipay:function(){this.$http.jsonp(s.default.C.Mpath+"order/app_alipay?payType=alipay&type=goods&id="+this.id).then(function(t){this.location=t.data.location,setTimeout(function(){alert((0,n.default)("form").html()),(0,n.default)("form").submit()},1e3)},function(){(0,d.Toast)("请求出错")})},weipay:function(){var t=this;this.$http.jsonp(s.default.C.Mpath+"pay/index?payType=wx_pay&type=goods&id="+this.id).then(function(e){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.data.appId,timeStamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?t.surePay():"get_brand_wcpay_request:cancel"==e.err_msg?(0,d.Toast)("用户取消支付!"):(0,d.Toast)("支付失败!")})},function(){(0,d.Toast)("请求出错")})},lunxun:function(){var t=this;setInterval(function(){t.$http.jsonp(s.default.C.Mpath+"pay/getOrder?orderId="+t.id).then(function(t){1==t.data.status&&((0,d.Toast)("付款成功"),setTimeout(function(){window.location.href="order.html"},1e3))})},1e3)},testPaypass:function(t){var e=/^\d{6}$/;return!!e.test(t)||((0,d.Toast)("请填写6位数支付密码"),!1)},surePay:function(){this.$http.jsonp(s.default.C.Mpath+"pay/return_pay?id="+this.id+"&type=goods").then(function(t){"1"==t.data.status&&(window.location.href="order.html")})}}}},652:function(t,e){},719:function(t,e){t.exports=' <top-back _v-74cc96ae=""></top-back> <template v-if=!location> <div class=order _v-74cc96ae=""> <section class=pro-detail _v-74cc96ae=""> <h5 _v-74cc96ae="">订单号：{{id}}</h5> <ul _v-74cc96ae=""> <li class=clearfix _v-74cc96ae=""> <a :href="\'art.html?id=\'+product.id" :style="\'background-image:url(\'+product.mainurl+\')\'" class="img fl" _v-74cc96ae=""></a> <div _v-74cc96ae=""> <h6 class=ellipsis _v-74cc96ae="">{{product.name}}</h6> <div class=prinum _v-74cc96ae=""> <b _v-74cc96ae="">类型</b>：{{product.producttype}}<em class=space _v-74cc96ae=""></em> <b _v-74cc96ae="">尺寸</b>：{{product.pwidth}}cm * {{product.pheight}}cm <br _v-74cc96ae=""> <b _v-74cc96ae="">年份</b>：{{product.createyear}}<em class=space _v-74cc96ae=""></em> <b _v-74cc96ae="">材质</b>：{{product.material}}<em class=space _v-74cc96ae=""></em> <b _v-74cc96ae="">装裱</b>： <template v-if=!product.haspack> 是 </template> <template v-else=""> 否 </template> <em class=space _v-74cc96ae=""></em> </div> </div> <div class=Subtotal _v-74cc96ae="">运费：￥<span class=bigsize _v-74cc96ae="">{{product.transprice}}</span> 价格：￥<span class=bigsize _v-74cc96ae="">{{product.price}}</span></div> </li> </ul> </section> <section class=consignee _v-74cc96ae=""> <h5 _v-74cc96ae="">收货人信息</h5> <div _v-74cc96ae=""> <a class=link _v-74cc96ae=""> <div class=addrs _v-74cc96ae=""> <div class=profile _v-74cc96ae="">{{addr.contactor}}</div> <div class=tel _v-74cc96ae="">{{addr.mobile}}</div> <div class=code _v-74cc96ae="">{{addr.code}}</div> </div> <div class=addr _v-74cc96ae=""> <span _v-74cc96ae="">{{addr.address}}</span> </div> </a> </div> </section> </div> <div class=addadr _v-74cc96ae="">订单金额（￥）：<span class=bigsize _v-74cc96ae="">{{totalmoney}}</span></div> <div class=addadr v-if="order.orderstatus == \'创建\'" _v-74cc96ae=""> <mt-button type=primary @click=showdeduc _v-74cc96ae="">云豆支付</mt-button> <mt-button type=primary @click=weipay _v-74cc96ae="">微信支付</mt-button> <mt-button type=primary @click=alipay _v-74cc96ae="">支付宝支付</mt-button> </div> <div class=addadr v-else="" _v-74cc96ae=""> <mt-button type=primary _v-74cc96ae="">{{order.orderstatus}}</mt-button> </div> <mt-popup :visible.sync=popupVisible position=center _v-74cc96ae=""> <div class=popupbox _v-74cc96ae=""> <p class=content _v-74cc96ae="">现有云豆数量：{{yundou}} 个</p> <mt-field label=支付云豆数量 type=text :value.sync=totalmoney readonly="" _v-74cc96ae=""></mt-field> <mt-field placeholder=支付密码 type=password :value.sync=paypwd :attr={minlength:6,maxlength:6} v-if="totalmoney < yundou" _v-74cc96ae=""></mt-field> <div class=page-button v-if="totalmoney < yundou" _v-74cc96ae=""> <mt-button type=primary @click=payment _v-74cc96ae="">立即支付</mt-button> </div> <p class="page-button red" v-else="" _v-74cc96ae="">云豆数量不足，请使用其他支付方式或<br _v-74cc96ae=""> <a href=property.html _v-74cc96ae=""> <mt-button type=primary _v-74cc96ae="">去充值</mt-button> </a> </p> </div> </mt-popup> </template> <template v-else=""> {{{location}}} </template> '},765:function(t,e,a){var c,o,s={};a(652),c=a(295),o=a(719),t.exports=c||{},t.exports.__esModule&&(t.exports=t.exports.default);var i="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;o&&(i.template=o),i.computed||(i.computed={}),Object.keys(s).forEach(function(t){var e=s[t];i.computed[t]=function(){return e}})}});