webpackJsonp([3],{0:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(11),s=n(i),o=a(774),r=n(o);new s.default({el:"body",components:{App:r.default}})},6:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(2),s=n(i);a(4);s.default.Vue.use(s.default.Resource),t.exports={data:function(){return{title:""}},props:["html"],ready:function(){this.title=document.title},methods:{back:function(){this.html?window.location.href=this.html:history.back()}}}},7:function(t,e){},8:function(t,e){t.exports=' <div class=height _v-526c7022=""></div> <div class="backbar clearfix" id=header _v-526c7022=""> <a @click=back class=back _v-526c7022=""><i class="iconfont icon-back" _v-526c7022=""></i></a> <h2 class="title ellipsis" id=title _v-526c7022="">{{title}}</h2> <a href=home.html class=home _v-526c7022=""><i class="iconfont icon-back" _v-526c7022=""></i></a> </div> '},9:function(t,e,a){var n,i,s={};a(7),n=a(6),i=a(8),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(s).forEach(function(t){var e=s[t];o.computed[t]=function(){return e}})},20:function(t,e,a){t.exports=!a(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},21:function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},22:function(t,e){var a=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=a)},27:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},29:function(t,e,a){var n=a(33),i=a(56),s=a(48),o=Object.defineProperty;e.f=a(20)?Object.defineProperty:function(t,e,a){if(n(t),e=s(e,!0),n(a),i)try{return o(t,e,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},32:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},33:function(t,e,a){var n=a(27);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},34:function(t,e,a){var n=a(29),i=a(42);t.exports=a(20)?function(t,e,a){return n.f(t,e,i(1,a))}:function(t,e,a){return t[e]=a,t}},37:function(t,e,a){var n=a(21),i=a(22),s=a(41),o=a(34),r="prototype",l=function(t,e,a){var u,c,p,d=t&l.F,f=t&l.G,m=t&l.S,h=t&l.P,v=t&l.B,b=t&l.W,x=f?i:i[e]||(i[e]={}),y=x[r],g=f?n:m?n[e]:(n[e]||{})[r];f&&(a=e);for(u in a)c=!d&&g&&void 0!==g[u],c&&u in x||(p=c?g[u]:a[u],x[u]=f&&"function"!=typeof g[u]?a[u]:v&&c?s(p,n):b&&g[u]==p?function(t){var e=function(e,a,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,n)}return t.apply(this,arguments)};return e[r]=t[r],e}(p):h&&"function"==typeof p?s(Function.call,p):p,h&&((x.virtual||(x.virtual={}))[u]=p,t&l.R&&y&&!y[u]&&o(y,u,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},41:function(t,e,a){var n=a(46);t.exports=function(t,e,a){if(n(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,n){return t.call(e,a,n)};case 3:return function(a,n,i){return t.call(e,a,n,i)}}return function(){return t.apply(e,arguments)}}},42:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},46:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},47:function(t,e,a){var n=a(27),i=a(21).document,s=n(i)&&n(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},48:function(t,e,a){var n=a(27);t.exports=function(t,e){if(!n(t))return t;var a,i;if(e&&"function"==typeof(a=t.toString)&&!n(i=a.call(t)))return i;if("function"==typeof(a=t.valueOf)&&!n(i=a.call(t)))return i;if(!e&&"function"==typeof(a=t.toString)&&!n(i=a.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},56:function(t,e,a){t.exports=!a(20)&&!a(32)(function(){return 7!=Object.defineProperty(a(47)("div"),"a",{get:function(){return 7}}).a})},78:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(2),s=n(i),o=a(4);s.default.Vue.component(o.Field.name,o.Field),t.exports={data:function(){return{token:""}},props:["stokens","tokens"],ready:function(){},methods:{addTag:function(t){var e=!1;if(!t&&(t=this.token,!this.token))return(0,o.Toast)("标签不能为空"),!1;for(var a=0;a<this.tokens.length;a++)this.tokens[a]===t&&((0,o.Toast)("该标签已经添加"),e=!0);return this.tokens.length>=5?((0,o.Toast)("最多只能添加5个标签"),!1):(e||(this.tokens=this.tokens.concat(t),e=!1,this.token=""),void this.setokens())},setokens:function(){var t=this.tokens.toString();this.$emit("getokens",t)},removeTag:function(t){var e=this;o.MessageBox.confirm("确定删除此标签？").then(function(a){return e.tokens.splice(t,1),(0,o.Toast)("删除成功"),e.setokens(),!1})}}}},82:function(t,e,a){t.exports={default:a(84),__esModule:!0}},83:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=a(82),s=n(i);e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},84:function(t,e,a){a(87);var n=a(22).Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},87:function(t,e,a){var n=a(37);n(n.S+n.F*!a(20),"Object",{defineProperty:a(29).f})},97:function(t,e){},101:function(t,e){t.exports=' <mt-field placeholder=请输入可关联的标签 :attr={autocomplete:off,maxlength:6} :value.sync=token _v-434062d4=""><a class=layui-btn @click="addTag(\'\')" _v-434062d4="">添加</a></mt-field> <div class=tokenbox _v-434062d4=""> <div class=tokens v-if=tokens.length _v-434062d4=""> <span v-for="item in tokens" _v-434062d4=""><b _v-434062d4="">{{item}}</b><a class=close @click=removeTag($index) _v-434062d4="">X</a></span> </div> <div class=token_t _v-434062d4=""> 系统推荐标签：<span v-for="item in stokens" v-on:click=addTag(item.value) _v-434062d4="">{{item.value}}</span> </div> </div> '},103:function(t,e,a){var n,i,s={};a(97),n=a(78),i=a(101),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(s).forEach(function(t){var e=s[t];o.computed[t]=function(){return e}})},127:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=a(2),s=n(i),o=a(44),r=n(o),l=a(4);s.default.Vue.use(s.default.Resource),t.exports={data:function(){},props:["name","title","classname","url","userid"],ready:function(){this.setsome(r.default),this.start()},methods:{getdata:function(){},setsome:function(t){var e;t.fn.uploadView=function(a){var n={uploadBox:".uploadBox",showBox:".showBox",width:200,height:200,allowType:["gif","jpeg","jpg","bmp","png"],maxSize:1,success:t.noop},i=t.extend(n,a),s=i.showBox,o=i.uploadBox,r=i.width,u=i.height,c=i.allowType,p=i.maxSize,d=i.success;t(this).each(function(e){t(this).change(function(e){f(t(this),r,u,c,p,d)})});var f=function(t,a,n,i,r,u){if("undefined"==typeof FileReader)return!1;var c=t.closest(o);if("undefined"!=typeof c.length){var p=t[0].files,d=p[0];if(!h(d.name,i))return(0,l.Toast)("图片类型必须是"+i.join("，")+"中的一种"),!1;var f=d.size,m=1024*r*1024;if(f>m)return(0,l.Toast)("上传图片超出允许上传大小"),!1;var v=new FileReader;v.onload=function(t){return function(t){var i=t.target.result;i.lastIndexOf("data:base64")!=-1?i=i.replace("data:base64","data:image/jpeg;base64"):i.lastIndexOf("data:,")!=-1&&(i=i.replace("data:,","data:image/jpeg;base64,"));var o='<img src="'+i+'"/>';c.find(s).show().html(o),e=a&&n?{width:a+"px",height:n+"px"}:a?{width:a+"px"}:n?{height:n+"px"}:{"max-width":"360px","max-height":"200px"},c.find(s+" img").css(e),u()}}(d),v.readAsDataURL(d)}},m=function(t){if(!t)return"";var e=t.lastIndexOf(".");return e<1?"":t.substr(e+1)},h=function(e,a){var n=m(e).toLowerCase();return a||(a=["jpg","jpeg","png","gif","bmp"]),t.inArray(n,a)!=-1}}},start:function(){var t=this;(0,r.default)("."+this.classname).uploadView({uploadBox:".uploadBox",showBox:".showBox",width:"auto",height:"auto",allowType:["gif","jpeg","jpg","bmp","png"],maxSize:2,success:function(e){t.ajax()}})},ajax:function(){var t=new FormData,e=(0,r.default)("#"+this.classname).find("img").attr("src");l.Indicator.open("上传中..."),t.append(this.name,e),t.append("userId",this.userid),r.default.ajax({url:this.url,type:"POST",cache:!1,data:t,processData:!1,contentType:!1,success:function(t){"200"==t.code?(l.Indicator.close(),(0,l.Toast)("上传成功")):(l.Indicator.close(),(0,l.Toast)("上传失败"))}})}}}},155:function(t,e){},159:function(t,e){t.exports=' <div class="uploadBox fl" _v-1fd2e34e=""> <div class=showBox :id=classname _v-1fd2e34e=""></div> <h4 _v-1fd2e34e="">{{title}}</h4> <div class=btn-upload _v-1fd2e34e=""> <input :class=classname accept=image/.jpg,image/.jpeg,image/.png :name=name type=file _v-1fd2e34e=""> </div> </div> '},164:function(t,e,a){var n,i,s={};a(155),n=a(127),i=a(159),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(s).forEach(function(t){var e=s[t];o.computed[t]=function(){return e}})},304:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(83),s=n(i),o=a(2),r=n(o),l=a(4),u=a(9),c=n(u),p=a(164),d=n(p),f=a(103),m=n(f);r.default.Vue.use(r.default.Resource),r.default.Vue.component(l.Cell.name,l.Cell),r.default.Vue.component(l.Field.name,l.Field),r.default.Vue.component(l.Radio.name,l.Radio),r.default.Vue.component(l.Picker.name,l.Picker),r.default.Vue.component(l.Popup.name,l.Popup),r.default.Vue.component(l.Switch.name,l.Switch),r.default.Vue.component(l.Button.name,l.Button),e.default={data:function(){var t;return t={sellstatus:!1,extension:!1,artistPhone:"",artistName:"",showname:!1,haspack:"未装裱",producttype:"",createyear:"2017",material:"",transprice:0,price:0,content:"",artlevel:0,agentlevel:0,pwidth:"",pheight:"",ptall:"",stokens:"",keywords:"",tokens:[],userid:""},(0,s.default)(t,"artistPhone",""),(0,s.default)(t,"artistName",""),(0,s.default)(t,"slots",[{flex:1,values:[],className:"slot1",textAlign:"center"}]),(0,s.default)(t,"slots2",[{flex:1,values:[],className:"slot1",textAlign:"center"}]),(0,s.default)(t,"inputs",[{name:"main",title:"艺术品主图"}]),(0,s.default)(t,"url",""),(0,s.default)(t,"random",""),(0,s.default)(t,"popupVisible1",!1),(0,s.default)(t,"popupVisible2",!1),t},components:{topBack:c.default,setArtimg:d.default,moduleLabel:m.default},ready:function(){this.random=Math.random(),this.url=r.default.C.Mpath+"tbProduct/upload?relid="+this.random,this.getData(),this.yearlist()},methods:{getData:function(){l.Indicator.open(),this.$http.jsonp(r.default.C.Mpath+"tbProduct/index").then(function(t){l.Indicator.close();for(var e=0;e<t.data.typelist.length;e++)this.slots[0].values.$set(e,t.data.typelist[e].value);this.artlevel=t.data.user.artlevel,this.agentlevel=t.data.user.agentlevel,this.stokens=t.data.keywords,this.userid=t.data.userId},function(){l.Indicator.close(),(0,l.Toast)("请求出错")})},getName:function(){if(!this.testTel(this.artistPhone))return!1;var t=r.default.C.Mpath+"tbProduct/ajaxQueryArt?artistPhone="+this.artistPhone;this.$http.jsonp(t).then(function(t){200==t.data.status?((0,l.Toast)("验证成功"),this.showname=!0,this.artistName=t.data.data.truename):((0,l.Toast)(t.data.message),this.showname=!1)})},yearlist:function(){for(var t=new Date,e=t.getFullYear(),a=0;a<100;a++)this.slots2[0].values.$set(a,e),e--},setokens:function(t){this.keywords=t},onValuesChange:function(t,e){this.producttype=e[0]},onValuesChange2:function(t,e){this.createyear=e[0]},addart:function(){var t=[{name:"imgdata",title:"艺术品"}];this.inputs.length<9&&(this.inputs=this.inputs.concat(t))},show1:function(){this.popupVisible1=!this.popupVisible1},show2:function(){this.popupVisible2=!this.popupVisible2},submit:function(){if(!this.name)return(0,l.Toast)("作品名不能为空"),!1;if(!(6!=this.agentlevel||this.testTel(this.artistPhone)&&this.artistName))return(0,l.Toast)("请输入并验证艺术家"),!1;if(this.pwidth<=0||this.pheight<=0||this.ptall<0)return(0,l.Toast)("尺寸必须为正整数"),!1;if(!this.material)return(0,l.Toast)("作品材质不能为空"),!1;if(this.sellstatus&&(this.price<=0||this.price%1!=0))return(0,l.Toast)("价格必须为正整数"),!1;if(this.transprice<0||this.transprice%1!=0)return(0,l.Toast)("运费必须为自然数"),!1;if(!this.content)return(0,l.Toast)("作品介绍不能为空"),!1;this.haspack?this.haspack=1:this.haspack=0;var t="name="+this.name;t+="&producttype="+this.producttype,6==this.agentlevel&&(t+="&artistPhone="+this.artistPhone,t+="&artistName="+this.artistName),t+="&pwidth="+this.pwidth,t+="&pheight="+this.pheight,this.ptall||(t+="&ptall="+this.ptall),t+="&createyear="+this.createyear,t+="&material="+this.material,t+=this.sellstatus?"&sellstatus=出售":"&sellstatus=非卖品",t+=this.extension?"&extension=22":"&extension=20",t+="&price="+this.price,t+="&transprice="+this.transprice,t+="&haspack="+this.haspack,t+="&keywords="+this.keywords,t+="&content="+this.content,t+="&relid="+this.random,this.$http.jsonp(r.default.C.Mpath+"tbProduct/mobilesave?"+t).then(function(t){111==t.data.status?((0,l.Toast)(t.data.message),setTimeout(function(){location.reload()},1e3)):(0,l.Toast)(t.data.message)},function(){(0,l.Toast)("请求出错")})},testTel:function(t){var e=/^1[3|4|5|7|8]\d{9}$/;return!(!e.test(t)||""==t)||((0,l.Toast)("请输入正确的手机号码"),!1)}}}},654:function(t,e){},721:function(t,e){t.exports=' <top-back _v-7b883b1a=""></top-back> <div class="pros clearfix" _v-7b883b1a=""> <template v-for="item in inputs"> <set-artimg :name=item.name :classname=item.name+$index :title=item.title :url=url :userid=userid @click=addart _v-7b883b1a=""></set-artimg> </template> </div> <div _v-7b883b1a=""> <mt-field label=作品名称： :value.sync=name :attr={maxlength:20} _v-7b883b1a="">{{njame}}</mt-field> <mt-field label=作品类别： :value.sync=producttype disabled="" _v-7b883b1a=""><a class=layui-btn @click=show1 _v-7b883b1a="">选择</a></mt-field> <template v-if="agentlevel == 6"> <mt-field label=艺术家手机： :value.sync=artistPhone :attr={maxlength:11,minlength:11} _v-7b883b1a=""><a class=layui-btn @click=getName _v-7b883b1a="">验证</a></mt-field> <mt-field label=艺术家： :value.sync=artistName disabled="" v-if=showname _v-7b883b1a="">{{njame}}</mt-field> </template> <mt-field label=长(cm)： :value.sync=pwidth type=number :attr={min:1,max:10000} _v-7b883b1a=""></mt-field> <mt-field label=宽(cm)： :value.sync=pheight type=number :attr={min:1,max:10000} _v-7b883b1a=""></mt-field> <mt-field label=高(cm)： v-if="producttype == \'雕塑\'" :value.sync=ptall type=number :attr={min:1,max:10000} _v-7b883b1a=""></mt-field> <mt-field label=创作年份： :value.sync=createyear disabled="" _v-7b883b1a=""><a class=layui-btn @click=show2 _v-7b883b1a="">选择</a></mt-field> <mt-field label=作品材质： :value.sync=material :attr={maxlength:10} _v-7b883b1a=""></mt-field> <mt-cell title=出售 v-if="artlevel > 1 || agentlevel == 6" _v-7b883b1a=""><mt-switch :value.sync=sellstatus _v-7b883b1a=""></mt-switch></mt-cell> <template class=income v-if=sellstatus> <mt-field label=售价（元） :value.sync=price type=number :attr={min:1,max:10000000} _v-7b883b1a=""></mt-field> <mt-cell title=推广 v-if="agentlevel != 6" _v-7b883b1a=""><mt-switch :value.sync=extension _v-7b883b1a=""></mt-switch></mt-cell> <template v-if=extension> <mt-field label=艺术家收益 :value.sync="price * 77 / 100" disabled="" _v-7b883b1a=""></mt-field> <mt-field label=经纪人收益 :value.sync="price * 15 / 100" disabled="" _v-7b883b1a=""></mt-field> <mt-field label=分享者收益 :value.sync="price * 3 / 100" disabled="" _v-7b883b1a=""></mt-field> <mt-field label=平台收益 :value.sync="price * 5 / 100" disabled="" _v-7b883b1a=""></mt-field> </template> <template v-else=""> <mt-field label=艺术家收益 :value.sync="price * 90 / 100" disabled="" _v-7b883b1a=""></mt-field> <mt-field label=平台收益 :value.sync="price * 10 / 100" disabled="" _v-7b883b1a=""></mt-field> </template> <mt-field label=运费（元） :value.sync=transprice type=number :attr={min:0,max:10000} _v-7b883b1a=""></mt-field> </template> <mt-cell title=是否装裱 _v-7b883b1a=""><mt-switch :value.sync=haspack _v-7b883b1a=""></mt-switch></mt-cell> <module-label :stokens=stokens :tokens=tokens @getokens=setokens _v-7b883b1a=""></module-label> <mt-field placeholder=作品介绍 type=textarea rows=4 :value.sync=content _v-7b883b1a=""></mt-field> <div class=page-button _v-7b883b1a=""><mt-button type=primary @click=submit _v-7b883b1a="">发布作品</mt-button></div> </div> <mt-popup :visible.sync=popupVisible1 _v-7b883b1a=""> <div class=popupbox _v-7b883b1a=""> <mt-picker :slots=slots @change=onValuesChange _v-7b883b1a=""></mt-picker> </div> </mt-popup> <mt-popup :visible.sync=popupVisible2 _v-7b883b1a=""> <div class=popupbox _v-7b883b1a=""> <mt-picker :slots=slots2 @change=onValuesChange2 _v-7b883b1a=""></mt-picker> </div> </mt-popup> '},774:function(t,e,a){var n,i,s={};a(654),n=a(304),i=a(721),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(s).forEach(function(t){var e=s[t];o.computed[t]=function(){return e}})}});